{"ast":null,"code":"var _jsxFileName = \"/Users/hadrien/Desktop/Projets OPENCLASSROOM/P7_vaison_hadrien/hadrien_P7/frontend/src/components/postform/PostForm.jsx\",\n    _s = $RefreshSig$();\n\nimport { useState, useContext } from \"react\";\nimport { AuthContext } from \"../../context/AuthContext\";\nimport styled from \"styled-components\";\nimport colors from \"../../utils/style/colors\";\nimport PermMediaIcon from \"@mui/icons-material/PermMedia\";\nimport CancelIcon from \"@mui/icons-material/Cancel\";\nimport axios from \"axios\"; // Composants\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const FormWrapper = styled.div`\n  padding: 10px;\n`;\n_c = FormWrapper;\nconst PostFormContainer = styled.form`\n  display: flex;\n  flex-direction: column;\n  row-gap: 15px;\n  width: 90%;\n  margin: 20px auto 50px;\n  background-color: whitesmoke;\n  border-radius: 10px;\n  border:1px solid ${colors.primary};\n  box-shadow: 3px 5px 5px ${colors.secondary};\n`;\n_c2 = PostFormContainer;\nexport const Label = styled.label`\n  display: flex;\n  padding:15px 15px 0px 15px;\n  align-items: center;\n  column-gap: 15px;\n  color: ${colors.tertiary};\n  font-size: 20px;\n  font-style: italic;\n`;\n_c3 = Label;\nexport const FileInput = styled.input`\n  display: none;\n`;\n_c4 = FileInput;\nconst PostFormImgContainer = styled.div`\n  display: flex;\n  justify-content: center;\n  height: 150px;\n  padding: 0 20px 10px 20px;\n  margin: 0 auto;\n  position: relative;\n`;\n_c5 = PostFormImgContainer;\nconst PostFileImg = styled.img`\n  border-radius: 10px;\n  width: 150px;\n  object-fit: cover;\n`;\n_c6 = PostFileImg;\nexport const CancelImg = styled(CancelIcon)`\n  color: ${colors.tertiary};\n  position: absolute;\n  top: 5px;\n  right: 25px;\n  cursor: pointer;\n  opacity: 0.7;\n`;\n_c7 = CancelImg;\nexport const TextArea = styled.textarea`\n  display: flex;\n  flex-wrap: wrap;\n  align-self: center;\n  height:100px;\n  width: 90%;\n  padding: 5px 5px 5px 10px;\n  border: solid 2px ${colors.tertiary};\n  border-radius: 10px;\n  resize: none;\n  &:focus {\n    outline: none;\n  }\n`;\n_c8 = TextArea;\nexport const Button = styled.button`\n  height: 35px;\n  width: 25%;\n  margin: 15px auto 15px auto;\n  background-color: ${colors.secondary};\n  color: ${colors.primary};\n  border: 0;\n  border-radius: 25px;\n  box-shadow: ${colors.tertiary} 2px 2px 5px;\n  font-size: large;\n  &:hover {\n    cursor: pointer;\n    box-shadow: 5px 5px 8px ${colors.tertiary};\n    background-color: ${colors.primary};\n    color: white;\n  }\n`;\n_c9 = Button;\nexport default function PostForm() {\n  _s();\n\n  const {\n    user\n  } = useContext(AuthContext);\n  const [message, setMessage] = useState(\"\");\n  const [file, setFile] = useState(null); //Create post\n\n  const handleFormSubmit = async e => {\n    e.preventDefault();\n    const {\n      userId,\n      username\n    } = user.currentUser;\n    const currentUser = JSON.parse(localStorage.getItem(\"user\"));\n    const formData = new FormData();\n    formData.append(\"userId\", userId);\n    formData.append(\"username\", username);\n    formData.append(\"image\", file);\n    formData.append(\"message\", message);\n    await axios.post(`http://localhost:3002/api/posts`, formData, {\n      headers: {\n        Authorization: currentUser.token\n      }\n    });\n    setMessage(\"\");\n    setFile(null);\n    window.location.reload();\n  };\n\n  return /*#__PURE__*/_jsxDEV(FormWrapper, {\n    children: /*#__PURE__*/_jsxDEV(PostFormContainer, {\n      onSubmit: handleFormSubmit,\n      children: [file && /*#__PURE__*/_jsxDEV(PostFormImgContainer, {\n        children: [/*#__PURE__*/_jsxDEV(PostFileImg, {\n          src: URL.createObjectURL(file),\n          alt: \"post_img\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(CancelImg, {\n          onClick: () => setFile(null)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Label, {\n        htmlFor: \"file\",\n        children: [\"Ajouter une image :\", /*#__PURE__*/_jsxDEV(PermMediaIcon, {\n          htmlColor: `${colors.primary}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(FileInput, {\n          type: \"file\",\n          id: \"file\",\n          accept: \".png,.jpeg,jpg\",\n          onChange: e => setFile(e.target.files[0])\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Label, {\n        children: \"Message :\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TextArea, {\n        name: \"message\",\n        value: message,\n        required: true,\n        placeholder: \"Votre message\",\n        onChange: e => setMessage(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        children: \"PUBLIER\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 122,\n    columnNumber: 5\n  }, this);\n}\n\n_s(PostForm, \"edYMxdE6JVxVALiIH4Wq2DUrVnA=\");\n\n_c10 = PostForm;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10;\n\n$RefreshReg$(_c, \"FormWrapper\");\n$RefreshReg$(_c2, \"PostFormContainer\");\n$RefreshReg$(_c3, \"Label\");\n$RefreshReg$(_c4, \"FileInput\");\n$RefreshReg$(_c5, \"PostFormImgContainer\");\n$RefreshReg$(_c6, \"PostFileImg\");\n$RefreshReg$(_c7, \"CancelImg\");\n$RefreshReg$(_c8, \"TextArea\");\n$RefreshReg$(_c9, \"Button\");\n$RefreshReg$(_c10, \"PostForm\");","map":{"version":3,"names":["useState","useContext","AuthContext","styled","colors","PermMediaIcon","CancelIcon","axios","FormWrapper","div","PostFormContainer","form","primary","secondary","Label","label","tertiary","FileInput","input","PostFormImgContainer","PostFileImg","img","CancelImg","TextArea","textarea","Button","button","PostForm","user","message","setMessage","file","setFile","handleFormSubmit","e","preventDefault","userId","username","currentUser","JSON","parse","localStorage","getItem","formData","FormData","append","post","headers","Authorization","token","window","location","reload","URL","createObjectURL","target","files","value"],"sources":["/Users/hadrien/Desktop/Projets OPENCLASSROOM/P7_vaison_hadrien/hadrien_P7/frontend/src/components/postform/PostForm.jsx"],"sourcesContent":["import { useState, useContext } from \"react\";\nimport { AuthContext } from \"../../context/AuthContext\";\nimport styled from \"styled-components\";\nimport colors from \"../../utils/style/colors\";\nimport PermMediaIcon from \"@mui/icons-material/PermMedia\";\nimport CancelIcon from \"@mui/icons-material/Cancel\";\nimport axios from \"axios\";\n\n// Composants\nexport const FormWrapper = styled.div`\n  padding: 10px;\n`;\n\nconst PostFormContainer = styled.form`\n  display: flex;\n  flex-direction: column;\n  row-gap: 15px;\n  width: 90%;\n  margin: 20px auto 50px;\n  background-color: whitesmoke;\n  border-radius: 10px;\n  border:1px solid ${colors.primary};\n  box-shadow: 3px 5px 5px ${colors.secondary};\n`;\n\nexport const Label = styled.label`\n  display: flex;\n  padding:15px 15px 0px 15px;\n  align-items: center;\n  column-gap: 15px;\n  color: ${colors.tertiary};\n  font-size: 20px;\n  font-style: italic;\n`;\n\nexport const FileInput = styled.input`\n  display: none;\n`;\n\nconst PostFormImgContainer = styled.div`\n  display: flex;\n  justify-content: center;\n  height: 150px;\n  padding: 0 20px 10px 20px;\n  margin: 0 auto;\n  position: relative;\n`;\n\nconst PostFileImg = styled.img`\n  border-radius: 10px;\n  width: 150px;\n  object-fit: cover;\n`;\n\nexport const CancelImg = styled(CancelIcon)`\n  color: ${colors.tertiary};\n  position: absolute;\n  top: 5px;\n  right: 25px;\n  cursor: pointer;\n  opacity: 0.7;\n`;\n\nexport const TextArea = styled.textarea`\n  display: flex;\n  flex-wrap: wrap;\n  align-self: center;\n  height:100px;\n  width: 90%;\n  padding: 5px 5px 5px 10px;\n  border: solid 2px ${colors.tertiary};\n  border-radius: 10px;\n  resize: none;\n  &:focus {\n    outline: none;\n  }\n`;\n\nexport const Button = styled.button`\n  height: 35px;\n  width: 25%;\n  margin: 15px auto 15px auto;\n  background-color: ${colors.secondary};\n  color: ${colors.primary};\n  border: 0;\n  border-radius: 25px;\n  box-shadow: ${colors.tertiary} 2px 2px 5px;\n  font-size: large;\n  &:hover {\n    cursor: pointer;\n    box-shadow: 5px 5px 8px ${colors.tertiary};\n    background-color: ${colors.primary};\n    color: white;\n  }\n`;\n\nexport default function PostForm() {\n  const { user } = useContext(AuthContext);\n  const [message, setMessage] = useState(\"\");\n  const [file, setFile] = useState(null);\n\n  //Create post\n  const handleFormSubmit = async (e) => {\n    e.preventDefault();\n    const { userId, username } = user.currentUser;\n    const currentUser = JSON.parse(localStorage.getItem(\"user\"));\n    const formData = new FormData();\n    formData.append(\"userId\", userId);\n    formData.append(\"username\", username);\n    formData.append(\"image\", file);\n    formData.append(\"message\", message);\n\n    await axios.post(`http://localhost:3002/api/posts`, formData, {\n      headers: { Authorization: currentUser.token },\n    });\n    setMessage(\"\");\n    setFile(null);\n    window.location.reload();\n  };\n\n  return (\n    <FormWrapper>\n      <PostFormContainer onSubmit={handleFormSubmit}>\n        {file && (\n          <PostFormImgContainer>\n            <PostFileImg src={URL.createObjectURL(file)} alt=\"post_img\" />\n            <CancelImg onClick={() => setFile(null)} />\n          </PostFormImgContainer>\n        )}\n        <Label htmlFor=\"file\">\n          Ajouter une image :\n          <PermMediaIcon htmlColor={`${colors.primary}`} />\n          <FileInput\n            type=\"file\"\n            id=\"file\"\n            accept=\".png,.jpeg,jpg\"\n            onChange={(e) => setFile(e.target.files[0])}\n          />\n        </Label>\n        <Label>Message :</Label>\n        <TextArea\n          name=\"message\"\n          value={message}\n          required\n          placeholder=\"Votre message\"\n          onChange={(e) => setMessage(e.target.value)}\n        ></TextArea>\n        <Button>PUBLIER</Button>\n      </PostFormContainer>\n    </FormWrapper>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}